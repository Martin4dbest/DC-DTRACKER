<!DOCTYPE html>
<html>
<head>
    <title>Update Pledge</title>
</head>
<body>
    <h1>Update or Mark Pledge as Pending</h1>

    {% if user %}
        <p>User: {{ user.name }} (Email: {{ user.email }})</p>
        <form action="{{ url_for('update_pledge', user_id=user.id) }}" method="POST">
            <label for="pledged_amount">Pledged Amount:</label>
            <input type="number" id="pledged_amount" name="pledged_amount" required min="0" step="0.01"
                   value="{{ current_pledge.pledged_amount if current_pledge else '' }}">

            <label for="currency">Currency:</label>
            <select id="currency" name="currency" required>
                <option value="USD" {% if current_pledge and current_pledge.pledge_currency == 'USD' %} selected {% endif %}>$ USD</option>
                <option value="EUR" {% if current_pledge and current_pledge.pledge_currency == 'EUR' %} selected {% endif %}>€ EUR</option>
                <option value="GBP" {% if current_pledge and current_pledge.pledge_currency == 'GBP' %} selected {% endif %}>£ GBP</option>
                <option value="NGN" {% if current_pledge and current_pledge.pledge_currency == 'NGN' %} selected {% endif %}>₦ NGN</option>
                <option value="GHS" {% if current_pledge and current_pledge.pledge_currency == 'GHS' %} selected {% endif %}>₵ GHS</option>
            </select>
            
            <!-- Button to confirm payment and reset pledge -->
            <button type="submit" class="button" name="payment_made" value="true" style="background-color: #28a745;">Confirm Payment (Reset to 0)</button>
            
            <!-- Button to update the pledge -->
            <button type="submit" class="button">Update Pledge</button>
        </form>
    {% else %}
        <p>User not found.</p>
    {% endif %}
</body>
</html>
